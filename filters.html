

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Bayesian Filters &mdash; PyBayes v0.2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PyBayes v0.2 documentation" href="index.html" />
    <link rel="next" title="PyBayes Development" href="HACKING.html" />
    <link rel="prev" title="Probability Density Functions" href="pdfs.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="HACKING.html" title="PyBayes Development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pdfs.html" title="Probability Density Functions"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyBayes v0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pybayes.filters">
<span id="bayesian-filters"></span><h1>Bayesian Filters<a class="headerlink" href="#module-pybayes.filters" title="Permalink to this headline">¶</a></h1>
<p>This module contains Bayesian filters.</p>
<p>All classes from this module are currently imported to top-level pybayes module,
so instead of <tt class="docutils literal"><span class="pre">from</span> <span class="pre">pybayes.filters</span> <span class="pre">import</span> <span class="pre">KalmanFilter</span></tt> you can type <tt class="docutils literal"><span class="pre">from</span>
<span class="pre">pybayes</span> <span class="pre">import</span> <span class="pre">KalmanFilter</span></tt>.</p>
<div class="section" id="filter-prototype">
<h2>Filter prototype<a class="headerlink" href="#filter-prototype" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pybayes.filters.Filter">
<em class="property">class </em><tt class="descclassname">pybayes.filters.</tt><tt class="descname">Filter</tt><a class="reference internal" href="_modules/pybayes/filters.html#Filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract prototype of a bayesian filter.</p>
<dl class="method">
<dt id="pybayes.filters.Filter.bayes">
<tt class="descname">bayes</tt><big>(</big><em>yt</em>, <em>cond=None</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#Filter.bayes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.Filter.bayes" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform approximate or exact bayes rule.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>yt</strong> (1D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; observation at time t</li>
<li><strong>cond</strong> (1D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; condition at time t. Exact meaning is defined by each filter</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">always returns True (see <a class="reference internal" href="#pybayes.filters.Filter.posterior" title="pybayes.filters.Filter.posterior"><tt class="xref py py-meth docutils literal"><span class="pre">posterior()</span></tt></a> to get aposteriori density)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pybayes.filters.Filter.posterior">
<tt class="descname">posterior</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#Filter.posterior"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.Filter.posterior" title="Permalink to this definition">¶</a></dt>
<dd><p>Return aposteriori probability density funcion (<a class="reference internal" href="pdfs.html#pybayes.pdfs.Pdf" title="pybayes.pdfs.Pdf"><tt class="xref py py-class docutils literal"><span class="pre">Pdf</span></tt></a>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">aposteriori density</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="pdfs.html#pybayes.pdfs.Pdf" title="pybayes.pdfs.Pdf"><tt class="xref py py-class docutils literal"><span class="pre">Pdf</span></tt></a></td>
</tr>
</tbody>
</table>
<p><em>Filter implementations may decide to return a reference to their work pdf - it is not safe
to modify it in any way, doing so may leave the filter in undefined state.</em></p>
</dd></dl>

<dl class="method">
<dt id="pybayes.filters.Filter.evidence_log">
<tt class="descname">evidence_log</tt><big>(</big><em>yt</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#Filter.evidence_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.Filter.evidence_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the logarithm of <em>evidence</em> function (also known as <em>marginal likehood</em>) evaluated
in point yt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>yt</strong> (<a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; point which to evaluate the evidence in</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">double</td>
</tr>
</tbody>
</table>
<p>This is typically computed after <a class="reference internal" href="#pybayes.filters.Filter.bayes" title="pybayes.filters.Filter.bayes"><tt class="xref py py-meth docutils literal"><span class="pre">bayes()</span></tt></a> with the same observation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span><span class="o">.</span><span class="n">bayes</span><span class="p">(</span><span class="n">yt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_likehood</span> <span class="o">=</span> <span class="nb">filter</span><span class="o">.</span><span class="n">evidence_log</span><span class="p">(</span><span class="n">yt</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="kalman-filter">
<h2>Kalman Filter<a class="headerlink" href="#kalman-filter" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pybayes.filters.KalmanFilter">
<em class="property">class </em><tt class="descclassname">pybayes.filters.</tt><tt class="descname">KalmanFilter</tt><big>(</big><em>A</em>, <em>B</em>, <em>C</em>, <em>D</em>, <em>Q</em>, <em>R</em>, <em>state_pdf</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#KalmanFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.KalmanFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of standard Kalman filter. <strong>cond</strong> in <a class="reference internal" href="#pybayes.filters.KalmanFilter.bayes" title="pybayes.filters.KalmanFilter.bayes"><tt class="xref py py-meth docutils literal"><span class="pre">bayes()</span></tt></a> is interpreted as
control (intervention) input <img class="math" src="_images/math/65934e62c7adf123e9849a7b9a163958162c1a74.png" alt="u_t"/> to the system.</p>
<p>Kalman filter forms <em>optimal Bayesian solution</em> for the following system:</p>
<div class="math">
<p><img src="_images/math/db3c8d99c46a3f3d6c349aa541bbc19d2bc8d3c5.png" alt="x_t &amp;= A_t x_{t-1} + B_t u_t + v_{t-1} \quad \quad
    A_t \in \mathbb{R}^{n,n} \;\;
    B_t \in \mathbb{R}^{n,k} \;\;
    \;\; n \in \mathbb{N}
    \;\; k \in \mathbb{N}_0 \text{ (may be zero)}
    \\
y_t &amp;= C_t x_t + D_t u_t + w_t \quad \quad \quad \;\;
    C_t \in \mathbb{R}^{j,n} \;\;
    D_t \in \mathbb{R}^{j,k} \;\;
    j \in \mathbb{N} \;\; j \leq n" /></p>
</div><p>where <img class="math" src="_images/math/dcf1c6f36966b6ffcbc7d8001a0d21620708039b.png" alt="x_t \in \mathbb{R}^n"/> is hidden state vector, <img class="math" src="_images/math/81bfc84b0453810390a93139ce565b04e2ef874e.png" alt="y_t \in \mathbb{R}^j"/> is
observation vector and <img class="math" src="_images/math/a9c3f8b026fbec8799a3256cce3ccd11cb7b1316.png" alt="u_t \in \mathbb{R}^k"/> is control vector. <img class="math" src="_images/math/54c637cab61f43e08325bd8c5a41e60bca94fa9a.png" alt="v_t"/> is normally
distributed zero-mean process noise with covariance matrix <img class="math" src="_images/math/3a493392033e7998dcd3df4c422cc4a14644b1f1.png" alt="Q_t"/>, <img class="math" src="_images/math/9407218b469d82075dd7da2a8c7b1e5bf17bec89.png" alt="w_t"/> is normally
distributed zero-mean observation noise with covariance matrix <img class="math" src="_images/math/9fbf70257cf041a08a07676aab5556e163115536.png" alt="R_t"/>. Additionally, every a
posteriori pdf (and intial pdf) have to be Gaussian.</p>
<dl class="method">
<dt id="pybayes.filters.KalmanFilter.__init__">
<tt class="descname">__init__</tt><big>(</big><em>A</em>, <em>B</em>, <em>C</em>, <em>D</em>, <em>Q</em>, <em>R</em>, <em>state_pdf</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#KalmanFilter.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.KalmanFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise Kalman filter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>A</strong> (2D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; process model matrix <img class="math" src="_images/math/2ad14c81978b68932f8ec828750c02438f581967.png" alt="A_t"/> from <a class="reference internal" href="#pybayes.filters.KalmanFilter" title="pybayes.filters.KalmanFilter"><tt class="xref py py-class docutils literal"><span class="pre">class</span> <span class="pre">description</span></tt></a>.</li>
<li><strong>B</strong> (2D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; process control model matrix <img class="math" src="_images/math/d713f67e9556171e4f028bfeac00f2efdcfd6e0e.png" alt="B_t"/> from <a class="reference internal" href="#pybayes.filters.KalmanFilter" title="pybayes.filters.KalmanFilter"><tt class="xref py py-class docutils literal"><span class="pre">class</span> <span class="pre">description</span></tt></a>.</li>
<li><strong>C</strong> (2D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; observation model matrix <img class="math" src="_images/math/3cb852f35979fc2f394947379aa5940440798f8a.png" alt="C_t"/> from <a class="reference internal" href="#pybayes.filters.KalmanFilter" title="pybayes.filters.KalmanFilter"><tt class="xref py py-class docutils literal"><span class="pre">class</span> <span class="pre">description</span></tt></a>.
Must be full-ranked.</li>
<li><strong>D</strong> (2D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; observation control model matrix <img class="math" src="_images/math/56ff51eb4870ec165ac7daed4a82c7323caf4e78.png" alt="D_t"/> from <a class="reference internal" href="#pybayes.filters.KalmanFilter" title="pybayes.filters.KalmanFilter"><tt class="xref py py-class docutils literal"><span class="pre">class</span> <span class="pre">description</span></tt></a>.</li>
<li><strong>Q</strong> (2D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; process noise covariance matrix <img class="math" src="_images/math/3a493392033e7998dcd3df4c422cc4a14644b1f1.png" alt="Q_t"/> from <a class="reference internal" href="#pybayes.filters.KalmanFilter" title="pybayes.filters.KalmanFilter"><tt class="xref py py-class docutils literal"><span class="pre">class</span> <span class="pre">description</span></tt></a>.
Must be positive definite.</li>
<li><strong>R</strong> (2D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; observation noise covariance matrix <img class="math" src="_images/math/9fbf70257cf041a08a07676aab5556e163115536.png" alt="R_t"/> from <a class="reference internal" href="#pybayes.filters.KalmanFilter" title="pybayes.filters.KalmanFilter"><tt class="xref py py-class docutils literal"><span class="pre">class</span> <span class="pre">description</span></tt></a>.
Must be positive definite.</li>
<li><strong>state_pdf</strong> (<a class="reference internal" href="pdfs.html#pybayes.pdfs.GaussPdf" title="pybayes.pdfs.GaussPdf"><tt class="xref py py-class docutils literal"><span class="pre">GaussPdf</span></tt></a>) &#8211; initial state pdf. This object is referenced and used throughout whole
life of KalmanFilter, so it is not safe to reuse state pdf for other purposes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>All matrices can be time-varying - you can modify or replace all above stated matrices
providing that you don&#8217;t change their shape and all constraints still hold. On the other
hand, you <strong>should not modify state_pdf</strong> unless you really know what you are doing.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># initialise control-less Kalman filter:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kf</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">KalmanFilter</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">]]),</span> <span class="n">B</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
<span class="go">                         C=np.array([[1.]]), D=np.zeros((1,0)),</span>
<span class="go">                         Q=np.array([[0.7]]), R=np.array([[0.3]]),</span>
<span class="go">                         state_pdf=pb.GaussPdf(...))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pybayes.filters.KalmanFilter.bayes">
<tt class="descname">bayes</tt><big>(</big><em>yt</em>, <em>cond=array(</em><span class="optional">[</span><span class="optional">]</span>, <em>dtype=float64)</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#KalmanFilter.bayes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.KalmanFilter.bayes" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform exact bayes rule.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>yt</strong> (1D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; observation at time t</li>
<li><strong>cond</strong> (1D <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0.dev-861e227)"><tt class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></tt></a>) &#8211; control (intervention) vector at time t. May be <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj xref docutils literal"><span class="pre">None</span></tt></a> if filter is
control-less.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">always returns True (see <a class="reference internal" href="#pybayes.filters.Filter.posterior" title="pybayes.filters.Filter.posterior"><tt class="xref py py-meth docutils literal"><span class="pre">posterior()</span></tt></a> to get aposteriori density)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="particle-filter-family">
<h2>Particle Filter Family<a class="headerlink" href="#particle-filter-family" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pybayes.filters.ParticleFilter">
<em class="property">class </em><tt class="descclassname">pybayes.filters.</tt><tt class="descname">ParticleFilter</tt><big>(</big><em>n</em>, <em>init_pdf</em>, <em>p_xt_xtp</em>, <em>p_yt_xt</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#ParticleFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.ParticleFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>A filter whose aposteriori density takes the form</p>
<div class="math">
<p><img src="_images/math/c0235906c6a9aee3db07ef413c36c3fbb2d273a4.png" alt="p(x_t|y_{1:t}) = \sum_{i=1}^n \omega_i \delta ( x_t - x_t^{(i)} )" /></p>
</div><dl class="method">
<dt id="pybayes.filters.ParticleFilter.__init__">
<tt class="descname">__init__</tt><big>(</big><em>n</em>, <em>init_pdf</em>, <em>p_xt_xtp</em>, <em>p_yt_xt</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#ParticleFilter.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.ParticleFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise particle filter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>n</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; number of particles</li>
<li><strong>init_pdf</strong> (<a class="reference internal" href="pdfs.html#pybayes.pdfs.Pdf" title="pybayes.pdfs.Pdf"><tt class="xref py py-class docutils literal"><span class="pre">Pdf</span></tt></a>) &#8211; probability density which initial particles are sampled from</li>
<li><strong>p_xt_xtp</strong> (<a class="reference internal" href="pdfs.html#pybayes.pdfs.CPdf" title="pybayes.pdfs.CPdf"><tt class="xref py py-class docutils literal"><span class="pre">CPdf</span></tt></a>) &#8211; <img class="math" src="_images/math/2301679dc44b0ba5393ec09837b89d77ee5cdf1a.png" alt="p(x_t|x_{t-1})"/> cpdf of state in <em>t</em> given state in <em>t-1</em></li>
<li><strong>p_yt_xt</strong> (<a class="reference internal" href="pdfs.html#pybayes.pdfs.CPdf" title="pybayes.pdfs.CPdf"><tt class="xref py py-class docutils literal"><span class="pre">CPdf</span></tt></a>) &#8211; <img class="math" src="_images/math/8cfb64723d3dccd5cc3f8c2735a3a0ed763b077c.png" alt="p(y_t|x_t)"/> cpdf of observation in <em>t</em> given state in <em>t</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pybayes.filters.ParticleFilter.bayes">
<tt class="descname">bayes</tt><big>(</big><em>yt</em>, <em>cond=None</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#ParticleFilter.bayes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.ParticleFilter.bayes" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Bayes rule for new measurement <img class="math" src="_images/math/84b7f27da2c227a9434fb4e732197dc030e2a168.png" alt="y_t"/>. The algorithm is as follows:</p>
<ol class="arabic simple">
<li>generate new particles: <img class="math" src="_images/math/ab258ea9e1d7fed54b3460862193cc7508a1609b.png" alt="x_t^{(i)} = \text{sample from }
p(x_t^{(i)}|x_{t-1}^{(i)}) \quad \forall i"/></li>
<li>recompute weights: <img class="math" src="_images/math/5959cf84f06c4f9eb36c97d4352ad729a88c05a0.png" alt="\omega_i = p(y_t|x_t^{(i)})
\omega_i \quad \forall i"/></li>
<li>normalise weights</li>
<li>resample particles</li>
</ol>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pybayes.filters.MarginalizedParticleFilter">
<em class="property">class </em><tt class="descclassname">pybayes.filters.</tt><tt class="descname">MarginalizedParticleFilter</tt><big>(</big><em>n</em>, <em>init_pdf</em>, <em>p_bt_btp</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#MarginalizedParticleFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.MarginalizedParticleFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Marginalized particle filter implementation. Assume that state variable <img class="math" src="_images/math/26eeb5258ca5099acf8fe96b2a1049c48c89a5e6.png" alt="x"/>
can be divided into two parts: <img class="math" src="_images/math/79c18f8eed1cf8786ef8c7fc1f3b49492427ba00.png" alt="x_t = [a_t, b_t]"/>, then aposteriori
pdf can be denoted as:</p>
<p>TODO: better description of Marginalized Particle Filter class</p>
<div class="math">
<p><img src="_images/math/7da247017672d147c21aaaf8611adab0b944324c.png" alt="p &amp;= \sum_{i=1}^n \omega_i p^{(i)}(a_t | b_{1:t}, y_{1:t}) \delta(b_t - b_t^{(i)}) \\
p^{(i)}(a_t | b_{1:t}, y_{1:t}) &amp;= \mathcal{N} (\hat{a}_t^{(i)}, P_t^{(i)}) \\
\text{where } \quad \hat{a}_t^{(i)} &amp;\text{ and } P_t^{(i)} \text{ is mean and
covariance of i}^{th} \text{ gauss pdf} \\
b_t^{(i)} &amp;\text{ is value of the (b part of the) i}^{th} \text{ particle} \\
\omega_i \geq 0 &amp;\text{ is weight of the i}^{th} \text{ particle} \quad \sum \omega_i = 1" /></p>
</div><dl class="method">
<dt id="pybayes.filters.MarginalizedParticleFilter.__init__">
<tt class="descname">__init__</tt><big>(</big><em>n</em>, <em>init_pdf</em>, <em>p_bt_btp</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#MarginalizedParticleFilter.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.MarginalizedParticleFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise marginalized particle filter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>n</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; number of particles</li>
<li><strong>init_pdf</strong> (<a class="reference internal" href="pdfs.html#pybayes.pdfs.Pdf" title="pybayes.pdfs.Pdf"><tt class="xref py py-class docutils literal"><span class="pre">Pdf</span></tt></a>) &#8211; probability density which initial particles are sampled from. (both
<img class="math" src="_images/math/bd7b27485881f9584eb55ef1fef58c055de03b7c.png" alt="a_t"/> and <img class="math" src="_images/math/a27ae64b71af735251a4ed459811816285ddf575.png" alt="b_t"/> parts)</li>
<li><strong>p_bt_btp</strong> (<a class="reference internal" href="pdfs.html#pybayes.pdfs.CPdf" title="pybayes.pdfs.CPdf"><tt class="xref py py-class docutils literal"><span class="pre">CPdf</span></tt></a>) &#8211; <img class="math" src="_images/math/57b1517ab3d3d59d53154f84a8a97cb06111a008.png" alt="p(b_t|b_{t-1})"/> cpdf of the (b part of the) state in <em>t</em> given
state in <em>t-1</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pybayes.filters.MarginalizedParticleFilter.bayes">
<tt class="descname">bayes</tt><big>(</big><em>yt</em>, <em>cond=None</em><big>)</big><a class="reference internal" href="_modules/pybayes/filters.html#MarginalizedParticleFilter.bayes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pybayes.filters.MarginalizedParticleFilter.bayes" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Bayes rule for new measurement <img class="math" src="_images/math/84b7f27da2c227a9434fb4e732197dc030e2a168.png" alt="y_t"/>. Uses following algorithm:</p>
<ol class="arabic simple">
<li>generate new b parts of particles: <img class="math" src="_images/math/eba0996db274532c94553a44ea246a71a83cdb80.png" alt="b_t^{(i)} = \text{sample from }
p(b_t^{(i)}|b_{t-1}^{(i)}) \quad \forall i"/></li>
<li><img class="math" src="_images/math/cf8cfb1f9f7b93b749408c0096835ecd2d7c9bb1.png" alt="\text{set } Q_i := b_t^{(i)} \quad R_i := b_t^{(i)}"/> where <img class="math" src="_images/math/1c00898b11bbafefcd304b6b97c13176dc5a35ea.png" alt="Q_i, R_i"/> is
covariance of process (respectively observation) noise in ith Kalman filter.</li>
<li>perform Bayes rule for each Kalman filter using passed observation <img class="math" src="_images/math/84b7f27da2c227a9434fb4e732197dc030e2a168.png" alt="y_t"/></li>
<li>recompute weights: <img class="math" src="_images/math/9d5b59968986ad0eba202608baa3f5bde1fab3e3.png" alt="\omega_i = p(y_t | y_{1:t}, b_t^{(i)}) \omega_i"/> where
<img class="math" src="_images/math/a48149286b4846880c2fb200d9413e6709049927.png" alt="p(y_t | y_{1:t}, b_t^{(i)})"/> is <em>evidence</em> (<em>marginal likehood</em>) pdf of ith Kalman
filter.</li>
<li>normalise weights</li>
<li>resample particles</li>
</ol>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Bayesian Filters</a><ul>
<li><a class="reference internal" href="#filter-prototype">Filter prototype</a></li>
<li><a class="reference internal" href="#kalman-filter">Kalman Filter</a></li>
<li><a class="reference internal" href="#particle-filter-family">Particle Filter Family</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pdfs.html"
                        title="previous chapter">Probability Density Functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="HACKING.html"
                        title="next chapter">PyBayes Development</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/filters.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="HACKING.html" title="PyBayes Development"
             >next</a> |</li>
        <li class="right" >
          <a href="pdfs.html" title="Probability Density Functions"
             >previous</a> |</li>
        <li><a href="index.html">PyBayes v0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Matěj Laitl.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>